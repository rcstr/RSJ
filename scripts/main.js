!function(){"use strict";window.RSJ={Models:{},Collections:{},Views:{},Routers:{},Vent:{},Config:{apiUrl:"http://risingsunjeans.com/api"},init:function(){return new RSJ.Views.AppView},setTitle:function(a){var b=document.getElementsByTagName("title")[0];b.innerHTML=a?a+" | Rising Sun Jeans":"Rising Sun Jeans"},setUrls:function(){$("[data-rsj-url]").click(function(){var a=this.dataset.rsjUrl;return RSJ.Routers.Navigator.navigate(a,{trigger:!0}),!1})}},$(document).ready(function(){RSJ.init()})}(),this.JST=this.JST||{},this.JST["app/scripts/templates/Blog.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<section id="blog-container" class="large-9 columns"></section>\n<aside role="sidebar" class="large-3 columns">\n	<div class="module" id="module-search">\n		<header>\n			<h4>Search <small>The Journal</small></h4>\n		</header>\n		<div class="content"></div>\n	</div>\n	<div class="module"id="module-archives">\n		<header>\n			<h4>Archives</h4>\n		</header>\n		<div class="content"></div>\n	</div>\n	<div class="module" id="module-categories">\n		<header>\n			<h4>Categories</h4>\n		</header>\n		<div class="content"></div>\n	</div>\n</aside>';return __p},this.JST["app/scripts/templates/BlogSinglePost.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+='<article id="post-'+(null==(__t=obj.get("id"))?"":__t)+'">\n	<header>\n		';var url=obj.get("categories")[0].slug+"/"+obj.get("slug");__p+='\n		<h3><a href="'+(null==(__t=url)?"":__t)+'">'+(null==(__t=obj.get("title"))?"":__t)+'</a></h3>\n	</header>\n	<div class="post-content">\n		'+(null==(__t=obj.get("content"))?"":__t)+"\n	</div>\n</article>"}return __p},this.JST["app/scripts/templates/Home.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+='<section id="home" class="large-12 column main-content l-one-column">\n	<div class="row">\n		';for(var i=0;1>i;i++)__p+='\n			<figure class="large-12 columns text-center">\n				<a href="'+(null==(__t=large[i].url)?"":__t)+'" title="'+(null==(__t=large[i].title)?"":__t)+'"><img width="886" src="'+(null==(__t=large[i].img)?"":__t)+'" alt="'+(null==(__t=large[i].title)?"":__t)+'"></a>\n			</figure>\n		';__p+='\n	</div>\n	<div class="row">\n		';for(var s=0;2>s;s++){var textDirection="left";1===s&&(textDirection="right"),__p+='\n			<figure class="large-6 columns text-'+(null==(__t=textDirection)?"":__t)+'">\n				<a href="'+(null==(__t=small[i].url)?"":__t)+'" title="'+(null==(__t=small[i].title)?"":__t)+'"><img src="'+(null==(__t=small[i].img)?"":__t)+'" alt="'+(null==(__t=small[i].title)?"":__t)+'"></a>\n			</figure>\n		'}__p+="\n	</div>\n</section>"}return __p},this.JST["app/scripts/templates/Page.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<section id="page-'+(null==(__t=attributes.slug)?"":__t)+'" class="large-12 column main-content l-one-column page-content">\n	'+(null==(__t=attributes.content)?"":__t)+"\n<section>";return __p},this.JST["app/scripts/templates/Stockist.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<li class="large-4 columns left">\n<strong>'+(null==(__t=title)?"":__t)+"</strong>\n<address>"+(null==(__t=address)?"":__t)+"</address>\n</li>";return __p},this.JST["app/scripts/templates/Stockists.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){var regions=obj;__p+="\n";for(var i=0;i<regions.length;i++)__p+='\n<details class="large-12 columns" data-rsj-stockist-region="'+(null==(__t=regions[i])?"":__t)+'" open="true">\n	<summary>'+(null==(__t=regions[i])?"":__t)+'</summary>\n	<ul class="row no-bullet"></ul>\n</details>\n'}return __p},function(){"use strict";RSJ.Models.CategoryModel=Backbone.Model.extend({})}(),function(){"use strict";RSJ.Models.PageModel=Backbone.Model.extend({url:RSJ.Config.apiUrl+"/get_page/",parse:function(a){return a.page}})}(),function(){"use strict";RSJ.Models.PostModel=Backbone.Model.extend({})}(),function(){"use strict";RSJ.Collections.CategoriesCollection=Backbone.Collection.extend({model:RSJ.Models.CategoryModel,url:RSJ.Config.apiUrl+"/get_category_index/",parse:function(a){return a.categories}})}(),function(){"use strict";RSJ.Collections.PostsCollection=Backbone.Collection.extend({model:RSJ.Models.PostModel,url:RSJ.Config.apiUrl+"/get_posts/",parse:function(a){return a.posts}})}(),function(){"use strict";RSJ.Views.AppView=Backbone.View.extend({el:"body",initialize:function(){RSJ.Vent=_.extend({},Backbone.Events),RSJ.Routers.Navigator=new RSJ.Routers.AppRouter,new RSJ.Routers.BlogRouter,Backbone.history.start({pushState:!1,root:"/"}),RSJ.setUrls()}})}(),function(){"use strict";RSJ.Views.BlogView=Backbone.View.extend({template:JST["app/scripts/templates/Blog.ejs"],el:"main",initialize:function(){_.bindAll(this),RSJ.Vent.on("rsj:blog",this.render)},render:function(){this.$el.html(this.template())}})}(),function(){"use strict";RSJ.Views.BlogPostsView=Backbone.View.extend({el:"main",initialize:function(){_.bindAll(this),this.collection=new RSJ.Collections.PostsCollection,RSJ.Vent.on("rsj:blog:home",this.renderHome)},renderHome:function(){var a=this,b=document.createDocumentFragment();this.collection.fetch({data:{category:"journal"},success:function(c){_.each(c.models,function(a){var c=new RSJ.Views.BlogSinglePostView({model:a});b.appendChild($(c.render())[0])}),a.$el.find("#blog-container").html(b)},error:function(a,b){console.log(b)}})}})}(),function(){"use strict";RSJ.Views.BlogSinglePostView=Backbone.View.extend({template:JST["app/scripts/templates/BlogSinglePost.ejs"],render:function(){return this.template(this.model)}})}(),function(){"use strict";RSJ.Views.HomeView=Backbone.View.extend({template:JST["app/scripts/templates/Home.ejs"],el:"main",initialize:function(){_.bindAll(this),this.collection=new RSJ.Collections.PostsCollection,RSJ.Vent.on("rsj:homepage",this.getSlides)},render:function(){return this.$el.html(this.template(this.serialize())),this},getSlides:function(){var a=this;this.collection.fetch({data:{post_type:"slide"},success:function(){a.render()},error:function(a,b){console.log(b)}})},serialize:function(){var a=[],b=[];return _.each(this.collection.models,function(c){var d={img:c.attributes.attachments[0].url,title:c.attributes.title,url:c.attributes.custom_fields["wpcf-slide-url"][0],isMain:1===parseFloat(c.attributes.custom_fields["wpcf-main-picture"][0])?!0:!1};d.isMain===!0?b.push(d):d.isMain===!1&&a.push(d)}),{small:a,large:b}}})}(),function(){"use strict";RSJ.Views.PageView=Backbone.View.extend({template:JST["app/scripts/templates/Page.ejs"],el:"main",initialize:function(){_.bindAll(this),this.model=new RSJ.Models.PageModel,RSJ.Vent.on("rsj:page",this.getPage),RSJ.setTitle(this.model.get("title"))},render:function(){return this.$el.html(this.template(this.model)),this},getPage:function(a){var b=this;this.model.fetch({data:{slug:a.slug},success:function(){b.render()},error:function(a,b){console.log(b)}})}})}(),function(){"use strict";RSJ.Views.StockistView=Backbone.View.extend({template:JST["app/scripts/templates/Stockist.ejs"],tagName:"li",initialize:function(){_.bindAll(this),this.render()},render:function(){return this.$el.append(this.template(this.serialize())),this},serialize:function(){var a={title:this.model.attributes.title,address:this.model.attributes.custom_fields["wpcf-address"][0]};return a}})}(),function(){"use strict";RSJ.Views.StockistsView=Backbone.View.extend({el:"main",template:JST["app/scripts/templates/Stockists.ejs"],initialize:function(){_.bindAll(this),this.collection=new RSJ.Collections.PostsCollection,RSJ.Vent.on("rsj:stockists",this.getStockists),RSJ.setTitle("STOCKIST")},render:function(a){return this.$el.html(this.template(a)),_.each(this.collection.models,function(a){new RSJ.Views.StockistView({model:a,el:'[data-rsj-stockist-region="'+a.attributes.taxonomy_region[0].title+'"] ul'})}),this},getStockists:function(){var a=this;this.collection.fetch({data:{post_type:"stock"},success:function(){a.extractRegions()},error:function(a,b){console.log(b)}})},extractRegions:function(){var a=[];_.filter(this.collection.models,function(b){var c=b.get("taxonomy_region")[0].title;a.indexOf(c)<0&&a.push(c)}),this.render(a)}})}(),function(){"use strict";RSJ.Routers.AppRouter=Backbone.Router.extend({routes:{"":"pageHome",stockist:"pageStockist","*slug":"page"},initialize:function(){new RSJ.Views.HomeView,new RSJ.Views.StockistsView,new RSJ.Views.PageView},pageHome:function(){RSJ.Vent.trigger("rsj:homepage")},pageStockist:function(){RSJ.Vent.trigger("rsj:stockists")},page:function(a){RSJ.Vent.trigger("rsj:page",{slug:a})}})}(),function(){"use strict";RSJ.Routers.BlogRouter=Backbone.Router.extend({routes:{blog:"blog","blog/:category":"blogCategory"},initialize:function(){new RSJ.Views.BlogView,new RSJ.Views.BlogPostsView},blog:function(){RSJ.Vent.trigger("rsj:blog"),RSJ.Vent.trigger("rsj:blog:home"),RSJ.setTitle("Blog")},blogCategory:function(a){RSJ.Vent.trigger("rsj:blog:category",{category:a})}})}();
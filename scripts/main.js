"use strict";RSJ.Collections.PagesCollection=Backbone.Collection.extend({model:RSJ.Models.PageModel,url:RSJ.Config.apiUrl+"/get_page/"}),RSJ.Collections.PostsCollection=Backbone.Collection.extend({model:RSJ.Models.PostModel,url:RSJ.Config.apiUrl+"/get_posts/",parse:function(a){return a.posts}}),window.RSJ={Models:{},Collections:{},Views:{},Routers:{},Config:{apiUrl:"http://risingsunjeans.com/api"},init:function(){return new RSJ.Views.AppView}},$(document).ready(function(){RSJ.init()}),RSJ.Models.PageModel=Backbone.Model.extend({}),RSJ.Models.PostModel=Backbone.Model.extend({}),RSJ.Routers.AppRouter=Backbone.Router.extend({routes:{"":"home",stockist:"pageStockist",":slug":"page"},initialize:function(){this.pagesCollection=new RSJ.Collections.PagesCollection,this.postsCollection=new RSJ.Collections.PostsCollection},Pagehome:function(){},pageStockist:function(){this.postsCollection.fetch({data:{post_type:"stock"},success:function(a){new RSJ.Views.StockistsView({collection:a})}})},page:function(a){this.pagesCollection.fetch({data:{slug:a}})}}),RSJ.Views.AppView=Backbone.View.extend({el:"body",initialize:function(){new RSJ.Routers.AppRouter,Backbone.history.start()}}),RSJ.Views.StockistView=Backbone.View.extend({template:JST["app/scripts/templates/Stockist.ejs"],tagName:"li",initialize:function(){this.render()},render:function(){return this.$el.append(this.template(this.model.attributes)),this}}),RSJ.Views.StockistsView=Backbone.View.extend({el:"main",template:JST["app/scripts/templates/Stockists.ejs"],initialize:function(){this._extractRegions()},_extractRegions:function(){var a=[];_.filter(this.collection.models,function(b){var c=b.get("taxonomy_region")[0].title;a.indexOf(c)<0&&a.push(c)}),this.render(a)},render:function(a){return this.$el.html(this.template(a)),_.each(this.collection.models,function(a){new RSJ.Views.StockistView({model:a,el:'[data-rsj-stockist-region="'+a.attributes.taxonomy_region[0].title+'"] ul'})}),this}}),this.JST=this.JST||{},this.JST["app/scripts/templates/App.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+="<p>Your content here.</p>\n\n";return __p},this.JST["app/scripts/templates/Stockist.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='<li class="large-4 columns">\n	',console.log(obj),__p+="\n<strong>"+(null==(__t=title)?"":__t)+"</strong>\n<address>"+(null==(__t=custom_fields["wpcf-address"][0])?"":__t)+"</address>\n</li>";return __p},this.JST["app/scripts/templates/Stockists.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){var regions=obj;__p+="\n";for(var i=0;i<regions.length;i++)__p+='\n<details class="large-12 columns" data-rsj-stockist-region="'+(null==(__t=regions[i])?"":__t)+'">\n	<summary>'+(null==(__t=regions[i])?"":__t)+'</summary>\n	<ul class="row"></ul>\n</details>\n'}return __p};